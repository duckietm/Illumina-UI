/*!
 * @pixi/canvas-extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/canvas-extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
import{ExtensionType as e,RenderTexture as t}from"@pixi/core";import{CanvasRenderTarget as r}from"@pixi/utils";import{Rectangle as n}from"@pixi/math";var a=new n,o=function(){function n(e){this.renderer=e}return n.prototype.image=function(e,t,r){var n=new Image;return n.src=this.base64(e,t,r),n},n.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},n.prototype.canvas=function(e,n){var o,i,u,h=this.renderer;e&&(u=e instanceof t?e:h.generateTexture(e)),u?(o=u.baseTexture._canvasRenderTarget.context,i=u.baseTexture._canvasRenderTarget.resolution,n=null!=n?n:u.frame):(o=h.rootContext,i=h.resolution,n||((n=a).width=h.width,n.height=h.height));var s=Math.round(n.x*i),d=Math.round(n.y*i),c=Math.round(n.width*i),g=Math.round(n.height*i),p=new r(c,g,1),x=o.getImageData(s,d,c,g);return p.context.putImageData(x,0,0),p.canvas},n.prototype.pixels=function(e,r){var n,o,i,u=this.renderer;e&&(i=e instanceof t?e:u.generateTexture(e)),i?(n=i.baseTexture._canvasRenderTarget.context,o=i.baseTexture._canvasRenderTarget.resolution,r=null!=r?r:i.frame):(n=u.rootContext,o=u.resolution,r||((r=a).width=u.width,r.height=u.height));var h=Math.round(r.x*o),s=Math.round(r.y*o),d=Math.round(r.width*o),c=Math.round(r.height*o);return n.getImageData(h,s,d,c).data},n.prototype.destroy=function(){this.renderer=null},n.extension={name:"extract",type:e.CanvasRendererPlugin},n}();export{o as CanvasExtract};
//# sourceMappingURL=canvas-extract.min.mjs.map
